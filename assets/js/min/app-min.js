"use strict()";function ToggleMenu(e,t){this.menuBtn=e,this.navElem=t,this.navVisible=!1,tSelf=this,this.playhead=new TimelineMax({paused:!0,yoyo:!0}),this.init()}function Service(){this.el=$(".service-overlay"),this.links=$(".services").find(".container").find("a"),this.linkIndex=0,this.playHead=new TimelineMax({paused:!0,yoyo:!0}),this.prevElem=this.el.find(".arrow-left"),this.nextElem=this.el.find(".arrow-right"),this.closeElem=this.el.find(".close"),this.visible=!1,self=this,this.init()}function SignupsOverlay(){this.el=$(".login-overlay"),this.closeBtn=this.el.find(".close"),this.signIn=this.el.find(".sign-in"),this.signInBtn=this.el.find(".signInBtn"),this.signUp=this.el.find(".sign-up"),this.signUpBtn=this.el.find(".signUpBtn"),this.retrievePassBtn=this.el.find(".retrievePassBtn"),this.retrievePassCont=this.el.find(".password-forgot"),this.playHead=new TimelineMax({paused:!0}),this.rt=new TimelineMax({paused:!0}),this.sut=new TimelineMax({paused:!0}),this.loginForm=$(".login-form"),this.forgotPasswordForm=$(".forgot-password-form"),this.signUpForm=$(".sign-up-form"),this.init(),SOSelf=this}ToggleMenu.prototype.init=function(){var e=this.navElem.innerHeight(),t=this.navElem.find("ul"),i=this.navElem.find("li");this.playhead.set(tSelf.navElem,{height:"0px",overflow:"hidden"}).set(t,{autoAlpha:0}).set(i,{autoAlpha:0}).to(tSelf.navElem,.6,{display:"block",height:e+"px",ease:Expo.easeOut}).to(t,.6,{autoAlpha:1}).staggerTo(i,.6,{autoAlpha:1},.1,"-=1"),this.menuBtn.on("click",this.showHideMenu)},ToggleMenu.prototype.showHideMenu=function(){console.log(tSelf.navVisible),tSelf.navVisible===!1?tSelf.showMenu():tSelf.hideMenu(),tSelf.navVisible=!tSelf.navVisible},ToggleMenu.prototype.showMenu=function(){this.playhead.timeScale(1),this.playhead.play()},ToggleMenu.prototype.hideMenu=function(){this.playhead.timeScale(4),this.playhead.reverse()},Service.prototype.init=function(){var e=this.el.find(".overlay_image"),t=this.el.find(".overlay_text"),i=this.el.find(".overlay_arrows .arrow");this.playHead.set(this.el,{display:"block",xPercent:"100%",autoAlpha:0,onReverseComplete:function(){self.visible=!1,self.resetPlayHead()}}).set(e,{yPercent:"50%",autoAlpha:0}).set(t,{yPercent:"20%",autoAlpha:0}).set(i,{autoAlpha:0}).set(self.closeElem,{autoAlpha:0}).to(".services .container",1,{className:"+=gray"}).to(this.el,1,{xPercent:"0%",autoAlpha:"1",force3D:!0,ease:Expo.easeInOut}).to(e,.8,{yPercent:"0%",autoAlpha:"1",force3D:!0,ease:Expo.easeOut}).to(t,1,{yPercent:"0%",autoAlpha:"1",force3D:!0,ease:Expo.easeOut}).staggerTo(i,1,{autoAlpha:1,force3D:!0,ease:Power4.easeOut},.5).to(self.closeElem,.3,{autoAlpha:"1",force3D:!0,ease:Quad.easeOut},1),this.nextElem.on("click",function(){self.next()}),this.prevElem.on("click",function(){self.prev()}),this.closeElem.on("click",function(){self.playHead.timeScale(3),self.close()})},Service.prototype.prev=function(){this.setIndex(this.linkIndex-1),this.load("",this.linkIndex)},Service.prototype.next=function(){this.setIndex(this.linkIndex+1),console.log(parseInt(this.linkIndex+1)),this.load("",parseInt(this.linkIndex))},Service.prototype.close=function(){this.playHead.reverse()},Service.prototype.isVisible=function(){return this.visible},Service.prototype.show=function(){this.isVisible()||(this.playHead.play(),this.visible=!0)},Service.prototype.resetPlayHead=function(){this.playHead.timeScale(1)},Service.prototype.setIndex=function(e){var t=this.links.length;this.linkIndex=0>e?t-1:e>t-1?0:e},Service.prototype.load=function(e,t){this.setIndex(e?e.index():t),$elem=this.links.parent().find("a:eq("+this.linkIndex+")"),this.isVisible()||self.show(),this.setIndex($elem.index());var i=$elem.attr("href");$.ajax({url:i}).done(function(e){self.replaceContent(e)})},Service.prototype.replaceContent=function(e){$(".overlay_image").find(".col").fadeOut(500,function(){$(this).html('<img src="'+e.image+'" alt="'+e.title+'">').fadeIn()}),$(".overlay_text_main_heading").fadeOut(500,function(){$(this).html(e.title).fadeIn()}),$(".overlay_text_main_body").fadeOut(500,function(){$(this).html(e.text).fadeIn()})},SignupsOverlay.prototype.init=function(){this.loginForm.prop("disabled",!0),this.playHead.set(this.el,{display:"block"}).from(this.el,1,{autoAlpha:1,yPercent:"-100%",force3D:!0,ease:Expo.easeOut}),this.rt.set(this.retrievePassCont,{display:"block"}).from(this.retrievePassCont,1,{autoAlpha:1,xPercent:"100%",force3D:!0,ease:Expo.easeOut}),this.sut.set(this.signUp,{display:"block"}).from(this.signUp,1,{autoAlpha:1,xPercent:"100%",force3D:!0,ease:Expo.easeOut}),this.closeBtn.on("click",function(){SOSelf.close()}),this.retrievePassBtn.on("click",function(e){SOSelf.retrievePassOpen(),e.preventDefault()}),this.signUpBtn.on("click",function(e){SOSelf.signUpOpen(),e.preventDefault()}),this.signInBtn.on("click",function(e){SOSelf.signInOpen(),e.preventDefault()}),this.loginForm.on("submit",function(e){var t={};t.email=$(this).find(".email").val(),t.password=$(this).find(".password").val(),t.mode="login";var i=$.post("http://www.garmentcareltd.com/testsite/functionality.php",t,function(e){}).done(function(e){e=$.trim(e),"-2"==e?document.location.href="http://www.garmentcareltd.com/testsite/dashboard.php":"0"==e?SOSelf.loginForm.find(".error").html("<strong>Invalid Login Details.</strong> Please use your correct email and password.").addClass("show"):"-1"==e&&SOSelf.loginForm.find(".error").html("<strong>Sorry, your account has been disabled.</strong>").addClass("show")});e.preventDefault()}),this.forgotPasswordForm.on("submit",function(e){var t={};t.email=$(this).find(".email").val(),t.mode="forgotPassword";var i=$.post("http://www.garmentcareltd.com/testsite/functionality.php",t,function(e){}).done(function(e){e=$.trim(e),console.log(e),"-1"==e?SOSelf.forgotPasswordForm.find(".error").html("<strong>A new password has been emailed to you. <br> Please follow the instructions to reset your password</strong>"):"-2"==e?SOSelf.forgotPasswordForm.find(".error").html("<strong>Sorry.</strong> There is no account with that email address. <br>Signup for a new account").addClass("show"):SOSelf.forgotPasswordForm.find(".error").html("<strong>There was an issue sending a new password to your email box. Please try again, or contact us if this error persists</strong>").addClass("0"==e?"show":"show")});e.preventDefault()}),this.signUpForm.on("submit",function(e){var t={};t.name=$(this).find(".fname").val(),t.lname=$(this).find(".lname").val(),t.email=$(this).find(".email").val(),t.password=$(this).find(".pword").val(),t.mobile=$(this).find(".phone").val(),t.mode="register";var i=$.post("http://www.garmentcareltd.com/testsite/functionality.php",t,function(e){}).done(function(e){e=$.trim(e),console.log(e),"0"==e?SOSelf.signUpForm.find(".error").html("<strong>Account already exists</strong>"):"-1"==e?SOSelf.signUpForm.find(".error").html("<strong>Password must be more than 3 characters in length.</strong>").addClass("show"):"-2"==e?SOSelf.signUpForm.find(".error").html("<strong>Congratulations! account is created, check your email for verification.</strong>").addClass("show"):"-3"==e?SOSelf.signUpForm.find(".error").html("<strong>An unknown error occurred, please try again.</strong>").addClass("show"):SOSelf.signUpForm.find(".error").html("<strong>Error: "+e+" </strong>").addClass("show")});e.preventDefault()})},SignupsOverlay.prototype.retrievePassOpen=function(){this.rt.play()},SignupsOverlay.prototype.open=function(){this.playHead.play()},SignupsOverlay.prototype.signInOpen=function(){this.rt.reverse(),this.sut.reverse()},SignupsOverlay.prototype.signUpOpen=function(){this.rt.reverse(),this.sut.play()},SignupsOverlay.prototype.close=function(){this.playHead.reverse()},$(document).ready(function(){var e,t,i,n,s,o,a;if(e=$(".menu"),t=$(".nav"),n=$(".home-banners"),a=$(".loginBtn"),i=new ToggleMenu(e,t),s=$(".services .item"),s.length>0)var r=new Service;sO=new SignupsOverlay,a.each(function(){$this=$(this),$this.on("click",function(e){TweenMax.to("body",1,{scrollTop:0,ease:Expo.easeInOut,onComplete:function(){sO.open()}}),e.preventDefault()})}),s.each(function(){$(this).on("click",function(e){var t=$(this);TweenMax.to("body",1,{scrollTop:$(".services").offset().top,ease:Expo.easeInOut,onComplete:function(){r.load(t)}}),e.preventDefault()})})}),$(window).load(function(){var e=$(".home-banners");try{e.cycle({speed:600,manualSpeed:300,delay:5,fx:"fade",swipe:!0,pauseOnHover:!0,prev:".arrow-left",next:".arrow-right"})}catch(t){console.log(t)}e.length>0&&e.animate({height:e.get(0).scrollHeight},1e3)});